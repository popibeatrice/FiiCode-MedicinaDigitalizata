(()=>{"use strict";const e=require("firebase/app"),r=require("firebase/storage"),t=require("firebase/firestore"),o=require("firebase/auth");var a=(0,e.initializeApp)({apiKey:"AIzaSyD00DDmckXiMglWRxEnhLBlQLovoLzfE-0",authDomain:"menumed-cc109.firebaseapp.com",projectId:"menumed-cc109",storageBucket:"menumed-cc109.appspot.com",messagingSenderId:"772753359565",appId:"1:772753359565:web:af2e60a2297359bbc0df84"}),l=(0,o.getAuth)();(0,o.setPersistence)(l,o.browserSessionPersistence);var n,u,i=(0,t.getFirestore)(a),s=(0,r.getStorage)(a),c=document.querySelector("form"),d=document.querySelector("#submit"),m=document.querySelector("#verify"),v=document.querySelector("#pass"),f=document.querySelector("#passconf"),p=document.querySelector(".password-regex"),y=/^(.{0,7}|[^a-z]{1,}|[^A-Z]{1,}|[^\d]{1,})$|[\s]/,g=/^(\+4|)?(07[0-8]{1}[0-9]{1}|02[0-9]{2}|03[0-9]{2}){1}?(\s|\.|\-)?([0-9]{3}(\s|\.|\-|)){2}$/;v.addEventListener("keyup",(function(){""===v.value?(v.style.borderBottomColor="#293241",p.style.color="rgb(75 85 99 / var(--tw-text-opacity))"):!0===y.test(v.value)?(v.style.borderBottomColor="red",p.style.color="red"):!1===y.test(v.value)&&(v.style.borderBottomColor="lightgreen",p.style.color="lightgreen"),""===v.value||""===f.value?f.style.borderBottomColor="#293241":f.value!==v.value?f.style.borderBottomColor="red":f.value===v.value&&(f.style.borderBottomColor="lightgreen")})),f.addEventListener("keyup",(function(){""===f.value||""===v.value?f.style.borderBottomColor="#293241":f.value!==v.value?f.style.borderBottomColor="red":f.value===v.value&&(f.style.borderBottomColor="lightgreen")})),m.addEventListener("click",(function(e){e.preventDefault();var r=c.email.value,t=c.pass.value;""!==r&&""!==t?!0!==y.test(v.value)?t===f.value?(0,o.createUserWithEmailAndPassword)(l,r,t).then((function(){(0,o.sendEmailVerification)(l.currentUser).then((function(){alert("verify your email")}))})).catch((function(e){console.log(e.message)})):alert("nu e buna confirmarea parolei"):alert("parola nu e safe"):alert("completati campurile")})),d.addEventListener("click",(function(e){e.preventDefault(),l.currentUser.reload().then((function(){if(l.currentUser.emailVerified){var e=c.nume.value,o=c.prenume.value,a=c.telnumb.value,d=c.idCard.files[0],m=c.medCard.files[0],v=c.workstart.value,f=c.workend.value,p=c.jud.value,y=c.loc.value;if(""===e||""===o||""==a||void 0===d||void 0===m||""===v||""===f||""===p||""===y)return void alert("campurile de date personale nu sunt completate");if(console.log(a),!1===g.test(a))return void alert("nr de telefon nu e valid");var b=new FileReader;b.readAsDataURL(d),b.onload=function(g){n=b.result;var h=new FileReader;h.readAsDataURL(m),h.onload=function(g){u=h.result;var b=l.currentUser.uid;(0,t.setDoc)((0,t.doc)(i,"medici",b),{nume:e,prenume:o,telnumb:a,workstart:v,workend:f,jud:p,loc:y});var S=(0,r.ref)(s,"".concat(b,"/").concat(d.name));(0,r.uploadString)(S,n,"data_url");var w=(0,r.ref)(s,"".concat(b,"/").concat(m.name));(0,r.uploadString)(w,u,"data_url"),c.reset(),location.href="./med_main.html"}}}else alert("emailul nu e confirmat")})).catch((function(e){console.log(e)}))}))})();